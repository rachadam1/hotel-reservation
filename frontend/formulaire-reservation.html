<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>R√©server une chambre</title>
  <style>
    body { font-family: Arial; padding: 40px; background: #f4f8fc; }
    .formulaire { max-width: 600px; margin: auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    h1 { text-align: center; margin-bottom: 20px; }
    label { display: block; margin-top: 15px; font-weight: bold; }
    input, select { width: 100%; padding: 10px; margin-top: 5px; font-size: 16px; }
    button { margin-top: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer; }
  </style>
</head>
<body>
  <div class="formulaire">
    <h1>üìÖ R√©server la chambre</h1>

    <form id="formReservation">
      <label>Nom du client :</label>
      <input type="text" id="nom_client" required>

      <label>Date d‚Äôarriv√©e :</label>
      <input type="date" id="date_arrivee" required>

      <label>Date de d√©part :</label>
      <input type="date" id="date_depart" required>

      <label>Heure d‚Äôarriv√©e :</label>
      <input type="time" id="heure_arrivee">

      <label>Heure de d√©part :</label>
      <input type="time" id="heure_depart">

      <label>Type de r√©servation :</label>
      <select id="type_reservation">
        <option value="classique">Classique (par nuit)</option>
        <option value="horaire">Horaire (par heure)</option>
      </select>

      <button type="submit">üíæ R√©server</button>
    </form>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const chambre_id = params.get('chambre_id');
    const hotel_id = params.get('hotel_id');

    document.getElementById('formReservation').addEventListener('submit', async function (e) {
      e.preventDefault();

      const data = {
        nom_client: document.getElementById('nom_client').value,
        date_arrivee: document.getElementById('date_arrivee').value,
        date_depart: document.getElementById('date_depart').value,
        heure_arrivee: document.getElementById('heure_arrivee').value,
        heure_depart: document.getElementById('heure_depart').value,
        type_reservation: document.getElementById('type_reservation').value,
        chambre_id,
        hotel_id
      };

      const res = await fetch('http://localhost:3000/api/reservations', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      const result = await res.json();
      if (res.ok) {
        alert('‚úÖ R√©servation enregistr√©e avec succ√®s !');
        window.location.href = `chambres-hotel.html?id=${hotel_id}`;
      } else {
        alert('‚ùå Erreur : ' + result.message);
      }
    });
  </script>
</body>
</html>
